<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reframed | Ascending and Descending</title>
    <script>
        (function(d) {
          var config = {
            kitId: 'vub7iix',
            scriptTimeout: 3000,
            async: true
          },
          h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
        })(document);
      </script>
    <style>
        body {
            cursor: none; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            min-height: 100vh;
            background: #ffffff; /* ğŸ’¡ ì˜¤ë²„ë ˆì´ì˜ ë°°ê²½ìƒ‰ê³¼ ì¼ì¹˜ */
            margin: 0;
            position: relative;
            font-family: sans-serif;
            font-family: "pretendard", sans-serif;
            font-weight: 700;
            font-style: normal;
        }

        /* ğŸ’¡ ì»¤ìŠ¤í…€ ì»¤ì„œ ìŠ¤íƒ€ì¼ */
        .custom-cursor {
            width: 20px; 
            height: 20px;
            border-radius: 50%;
            background-color: #ffffff; 
            position: fixed; 
            pointer-events: none; 
            z-index: 9999; 
            transform: translate(-50%, -50%); 
            transition: transform 0.1s ease-out; 
            mix-blend-mode: difference; 
            opacity: 1; 
            will-change: transform; 
        }

        /* ê¸°ì¡´ ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë” ìŠ¤íƒ€ì¼ */
        .comparison-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            aspect-ratio: 16 / 9;
            overflow: hidden;
            z-index: 50;
            cursor: none; 
        }
        
        /* ğŸ’¡ ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•œ ì˜¤ë²„ë ˆì´ ìŠ¤íƒ€ì¼ (í°ìƒ‰ ë§ˆìŠ¤í¬) */
        .reveal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 55; /* ì´ë¯¸ì§€ ìœ„ì— ìœ„ì¹˜ */
            
            /* ğŸ’¡ ì´ˆê¸° ìƒíƒœ: í™”ë©´ ì¤‘ì•™ì—ì„œ 0% í¬ê¸°ì˜ ì›ìœ¼ë¡œ ê°€ë ¤ì ¸ ìˆìŒ */
            clip-path: circle(0% at 50% 50%); 
            background: #ffffff; /* í°ìƒ‰ ë°°ê²½ìœ¼ë¡œ ì „ì²´ í™”ë©´ì„ ê°€ë¦¼ */
            transition: clip-path 1.5s ease-out; /* ì• ë‹ˆë©”ì´ì…˜ ì‹œê°„ */
        }
        
        .comparison-container img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            pointer-events: none;
        }
        
        /* ğŸ’¡ image-before: 50% ë¶„í•  ìƒíƒœë¥¼ CSSë¡œ ìœ ì§€ */
        .image-before {
            z-index: 10;
            clip-path: inset(0 50% 0 0); 
        }
        .image-after {
            z-index: 1;
        }
        
        .slider-handle {
            position: absolute;
            z-index: 60; /* ğŸ’¡ ì˜¤ë²„ë ˆì´(55)ë³´ë‹¤ ìœ„ì— ìœ„ì¹˜í•˜ì—¬ í•­ìƒ ë³´ì…ë‹ˆë‹¤. */
            top: 0;
            left: 50%;
            width: 0px; 
            height: 100%;
            background-color: transparent; 
            cursor: none; 
            transform: translateX(-50%);
            transition: left 0.15s ease-out; 
        }
        .slider-handle::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 120px; 
        height: 120px; 
        background: none; 
        background-image: url('r2.png'); 
        background-size: contain; 
        background-repeat: no-repeat; 
        background-position: center; 
        border-radius: 50%;
        box-shadow: 0 0 20px rgba(255, 236, 197, 0.8);
        z-index: 21; 
    }
        
        /* ì„¤ëª… í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .image-description {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            padding: 10px 15px;
            background: #F1E4CA;
            color: #000000;
            border-radius: 0px;
            font-size: 1.2rem;
            white-space: nowrap; 
            box-shadow: 0 0px 0px rgba(0, 0, 0, 0.1);
            opacity: 0; 
            transition: opacity 0.3s ease, left 0.15s ease, right 0.15s ease;
            pointer-events: none; 
            max-width: 500px;
            font-family: helvetica-neue-lt-pro-cond, sans-serif;
            font-weight: 700;
            font-style: normal;
        }

        .description-before {
            left: 70px; 
        }

        .description-after {
            right: 70px; 
            color: #F1E4CA;
            background: #000000;
        }
        
        ::selection {
            background: transparent; 
            color: inherit;
        }

        /* ğŸ’¡ 'X' ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .close-button {
            position: fixed; 
            top: 20px;
            right: 20px;
            width: 40px; 
            height: 40px;
            border-radius: 50%; 
            background-color: #F1E4CA; 
            color: #000; 
            font-size: 2rem; 
            font-family: helvetica-neue-lt-pro, sans-serif;
            font-weight: 400;
            font-style: normal;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer; 
            z-index: 100; 
            transition: transform 0.1s; 
        }
        
        /* ğŸ‘‡ 'X' í…ìŠ¤íŠ¸ë§Œ ë¯¸ì„¸ ì¡°ì • */
        .x-text {
            display: inline-block;
            transform: translateY(-3px); 
        }
        
        .close-button:hover {
            transform: scale(1.1); 
        }
    </style>
</head>
<body>
    <div class="custom-cursor" id="custom-cursor"></div>
    
    <div id="three-container"></div>
    
    <div class="comparison-container" id="my-container">
        <div class="reveal-overlay" id="reveal-overlay">
            <img class="image-before" src="web-source/6.jpg" alt="Before Image"> 
            <img class="image-after" src="web-source/6-1.jpg" alt="After Image">
        </div>
        
        <div class="slider-handle" id="my-slider">
             <div class="image-description description-before" id="desc-before">
                </div>
            <div class="image-description description-after" id="desc-after">
                </div>
        </div>
    </div>

    <div class="close-button" id="closeButton"><span class="x-text">x</span></div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const container = document.getElementById('my-container');
        const slider = document.getElementById('my-slider');
        const imageBefore = container.querySelector('.image-before');
        const imageAfter = container.querySelector('.image-after'); 
        const revealOverlay = document.getElementById('reveal-overlay'); // ğŸ’¡ ì˜¤ë²„ë ˆì´ ìš”ì†Œ
        
        const descBefore = document.getElementById('desc-before');
        const descAfter = document.getElementById('desc-after');

        const customCursor = document.getElementById('custom-cursor');
        const closeButton = document.getElementById('closeButton');

        // --- ì„¤ëª… ë‚´ìš© ---
        const textBefore = 'M. C. Escher, Ascending and Descending, 1960.<br><span style="font-size:1rem;font-family: pretendard, sans-serif; font-weight: 500; font-style: normal;">ë§ˆìš°ë¦¬ì¸  ì½”ë¥´ë„¬ë¦¬ìŠ¤ ì—ì…”, ì˜¬ë¼ê°€ê¸°ì™€ ë‚´ë ¤ê°€ê¸°, 1960.';
        const textAfter = 'Christopher Nolan, Inception, 2010.<br><span style="font-size:1rem;font-family: pretendard, sans-serif; font-weight: 500; font-style: normal;">í¬ë¦¬ìŠ¤í† í¼ ë†€ë€, ì¸ì…‰ì…˜, 2010.';
        
        descBefore.innerHTML = textBefore;
        descAfter.innerHTML = textAfter;

        let isDragging = false; 
        const threshold = 60; 
        let animationComplete = false; // ğŸ’¡ ì• ë‹ˆë©”ì´ì…˜ ì™„ë£Œ ìƒíƒœ ì¶”ì  ë³€ìˆ˜

        // ì»¤ìŠ¤í…€ ì»¤ì„œ ìœ„ì¹˜ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        const updateCursor = (x, y) => {
            customCursor.style.left = `${x}px`;
            customCursor.style.top = `${y}px`;
        };
        
        const onDrag = (e) => {
            if (!animationComplete) return; // ğŸ’¡ ì• ë‹ˆë©”ì´ì…˜ ì™„ë£Œ ì „ì—ëŠ” ë“œë˜ê·¸ ì°¨ë‹¨
            
            if (!isDragging) return; 
            
            let clientX = e.clientX || (e.changedTouches && e.changedTouches[0].clientX);
            if (clientX === undefined) return;

            const rect = container.getBoundingClientRect();
            let newX = clientX - rect.left;
            
            if (newX < 0) newX = 0;
            if (newX > rect.width) newX = rect.width;
            
            const percentage = (newX / rect.width) * 100;
            
            slider.style.left = percentage + '%';
            imageBefore.style.clipPath = `inset(0 ${100 - percentage}% 0 0)`;
            
            if (percentage >= threshold) { 
                descBefore.style.opacity = '1';
                descAfter.style.opacity = '0';
            } 
            else if (percentage <= (100 - threshold)) { 
                descBefore.style.opacity = '0';
                descAfter.style.opacity = '1';
            } 
            else {
                descBefore.style.opacity = '0';
                descAfter.style.opacity = '0';
            }
        };
        
        document.addEventListener('mousemove', (e) => {
            updateCursor(e.clientX, e.clientY);
            if (isDragging) { onDrag(e); }
            const isOverSlider = slider.contains(e.target);
            const isOverCloseButton = closeButton.contains(e.target);
            if ((isOverSlider || isOverCloseButton) && !isDragging) {
                customCursor.style.transform = 'translate(-50%, -50%) scale(1.2)';
            } else if (!isDragging) {
                customCursor.style.transform = 'translate(-50%, -50%) scale(1)';
            }
        });
        document.addEventListener('touchmove', (e) => {
            if (e.touches.length > 0) { updateCursor(e.touches[0].clientX, e.touches[0].clientY); }
            if (isDragging) { onDrag(e); }
        }, { passive: true });
        
        const startDrag = (e) => { 
            if (!animationComplete) return; 
            isDragging = true; 
            e.preventDefault(); 
            document.body.style.cursor = 'none'; 
            customCursor.style.transform = 'translate(-50%, -50%) scale(1.2)'; 
        };
        
        const stopDrag = () => { 
            isDragging = false; 
            document.body.style.cursor = ''; 
            customCursor.style.transform = 'translate(-50%, -50%) scale(1)'; 
        };

        slider.addEventListener('mousedown', startDrag);
        document.addEventListener('mouseup', stopDrag); 
        slider.addEventListener('touchstart', (e) => {
            startDrag(e);
            onDrag(e);
        }, { passive: true });
        document.addEventListener('touchend', stopDrag, { passive: true });
        closeButton.addEventListener('click', () => {
            window.location.href = 'index.html'; 
        });


        // ğŸ’¡ --- í™•ì¥ ì• ë‹ˆë©”ì´ì…˜ ì‹¤í–‰ ë¡œì§ ---
        const runRevealAnimation = () => {
            
            // 1. ì• ë‹ˆë©”ì´ì…˜ ëª©í‘œ: ì˜¤ë²„ë ˆì´ì˜ clip-pathë¥¼ í™•ì¥í•˜ì—¬ ë‚´ë¶€ì˜ ë¶„í• ëœ ì´ë¯¸ì§€ë¥¼ ë“œëŸ¬ëƒ„
            // CSSì—ì„œ ì´ë¯¸ clip-path: circle(0% at 50% 50%)ê°€ ì ìš©ë˜ì–´ í™”ë©´ ì „ì²´ë¥¼ í°ìƒ‰ìœ¼ë¡œ ê°€ë¦¬ê³  ìˆìŠµë‹ˆë‹¤.
            const finalClipPath = `circle(120% at 50% 50%)`;

            // 2. DOM ì—…ë°ì´íŠ¸ í›„ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
            requestAnimationFrame(() => {
                revealOverlay.style.clipPath = finalClipPath;
            });

            // 3. ì• ë‹ˆë©”ì´ì…˜ ì™„ë£Œ í›„ ì‹¤í–‰ (CSS transition ì‹œê°„ 1.5sì— ë§ì¶¥ë‹ˆë‹¤.)
            setTimeout(() => {
                animationComplete = true; // ì• ë‹ˆë©”ì´ì…˜ ì™„ë£Œ, ë“œë˜ê·¸ í™œì„±í™”
                
                // ğŸ’¡ ì˜¤ë²„ë ˆì´ ìš”ì†Œì˜ clip-pathë¥¼ ì œê±°í•˜ê³  z-indexë¥¼ ë‚®ì¶° ì™„ì „íˆ ë¹„í™œì„±í™”í•©ë‹ˆë‹¤.
                revealOverlay.style.clipPath = 'none';
                revealOverlay.style.zIndex = '1'; 
                
                // ğŸ’¡ ë‚˜ë¨¸ì§€ ì´ˆê¸° ì„¤ì • ë³µêµ¬ (ì´ë¯¸ CSSì—ì„œ ì„¤ì •ëœ 50% ë¶„í•  ìƒíƒœë¥¼ ìœ ì§€)
                const initialPercentage = 50;
                slider.style.left = initialPercentage + '%';
                imageBefore.style.clipPath = `inset(0 ${100 - initialPercentage}% 0 0)`;
                descBefore.style.opacity = '0'; 
                descAfter.style.opacity = '0'; 
                
            }, 500); 
        };
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì• ë‹ˆë©”ì´ì…˜ ì‹¤í–‰
        runRevealAnimation();
    });
</script>
    
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.150.1/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.150.1/examples/jsm/"
            }
        }
    </script>
</body>
</html>